<!doctype html><html class=no-js lang=en-us prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta property="og:title" content="Wild Rydes Web Application"><meta property="og:type" content="website"><meta property="og:url" content><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=generator content="Hugo 0.83.1"><meta name=description content="Wild Rydes Web Application"><meta name=author content="Ben Smith"><link rel="shortcut icon" href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><link rel=icon href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><title>User Pool :: Wild Rydes Web Application</title><link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-aws.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><script src=/js/shortbreadV1.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><script>const shortbread=AWSCShortbread({domain:"webapp.serverlessworkshops.io"});shortbread.checkForCookieConsent();function showCookie(){shortbread.customizeCookies()}</script></head><body data-url=/usermanagement/userpool/><nav id=sidebar><div id=header-wrapper><div id=header><div><a href=/ title="Go home"><img style=vertical-align:middle src=/images/logo.png height=70px></a></div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script><script type=text/javascript src=/js/auto-complete.js></script><script type=text/javascript>var baseurl="https://webapp.serverlessworkshops.io"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/setup/ title=Setup class=dd-item><a href=/setup/><b>0. </b>Setup</a><ul><li data-nav-id=/setup/accountsetup/ title="Account Setup" class=dd-item><a href=/setup/accountsetup/>Account Setup</a></li><li data-nav-id=/setup/recap/ title=Recap class=dd-item><a href=/setup/recap/>Recap</a></li></ul></li><li data-nav-id=/staticwebhosting/ title="Static Web Hosting" class=dd-item><a href=/staticwebhosting/><b>1. </b>Static Web Hosting</a><ul><li data-nav-id=/staticwebhosting/overview/ title=Overview class=dd-item><a href=/staticwebhosting/overview/>Overview</a></li><li data-nav-id=/staticwebhosting/region/ title=Region class=dd-item><a href=/staticwebhosting/region/>Region</a></li><li data-nav-id=/staticwebhosting/repository/ title=Repository class=dd-item><a href=/staticwebhosting/repository/>Repository</a></li><li data-nav-id=/staticwebhosting/deploy/ title=Deploy class=dd-item><a href=/staticwebhosting/deploy/>Deploy</a></li><li data-nav-id=/staticwebhosting/modify/ title=Modify class=dd-item><a href=/staticwebhosting/modify/>Modify</a></li><li data-nav-id=/staticwebhosting/recap/ title=Recap class=dd-item><a href=/staticwebhosting/recap/>Recap</a></li></ul></li><li data-nav-id=/usermanagement/ title="User Management" class="dd-item
parent"><a href=/usermanagement/><b>2. </b>User Management</a><ul><li data-nav-id=/usermanagement/overview/ title=Overview class=dd-item><a href=/usermanagement/overview/>Overview</a></li><li data-nav-id=/usermanagement/amplifycli/ title="Amplify Cli" class=dd-item><a href=/usermanagement/amplifycli/>Amplify Cli</a></li><li data-nav-id=/usermanagement/userpool/ title="User Pool" class="dd-item active"><a href=/usermanagement/userpool/>User Pool</a></li><li data-nav-id=/usermanagement/appclient/ title="App Client" class=dd-item><a href=/usermanagement/appclient/>App Client</a></li><li data-nav-id=/usermanagement/createuser/ title="Create a User" class=dd-item><a href=/usermanagement/createuser/>Create a User</a></li><li data-nav-id=/usermanagement/recap/ title=Recap class=dd-item><a href=/usermanagement/recap/>Recap</a></li></ul></li><li data-nav-id=/serverlessbackend/ title="Serverless Backend" class=dd-item><a href=/serverlessbackend/><b>3. </b>Serverless Backend</a><ul><li data-nav-id=/serverlessbackend/overview/ title=Overview class=dd-item><a href=/serverlessbackend/overview/>Overview</a></li><li data-nav-id=/serverlessbackend/dynamodb/ title=DynamoDB class=dd-item><a href=/serverlessbackend/dynamodb/>DynamoDB</a></li><li data-nav-id=/serverlessbackend/iam/ title=IAM class=dd-item><a href=/serverlessbackend/iam/>IAM</a></li><li data-nav-id=/serverlessbackend/lambda/ title=Lambda class=dd-item><a href=/serverlessbackend/lambda/>Lambda</a></li><li data-nav-id=/serverlessbackend/recap/ title=Recap class=dd-item><a href=/serverlessbackend/recap/>Recap</a></li></ul></li><li data-nav-id=/restfulapis/ title="RESTful APIs" class=dd-item><a href=/restfulapis/><b>4. </b>RESTful APIs</a><ul><li data-nav-id=/restfulapis/overview/ title=Overview class=dd-item><a href=/restfulapis/overview/>Overview</a></li><li data-nav-id=/restfulapis/restapi/ title="REST API" class=dd-item><a href=/restfulapis/restapi/>REST API</a></li><li data-nav-id=/restfulapis/cognito/ title=Cognito class=dd-item><a href=/restfulapis/cognito/>Cognito</a></li><li data-nav-id=/restfulapis/resource/ title="API Resource" class=dd-item><a href=/restfulapis/resource/>API Resource</a></li><li data-nav-id=/restfulapis/deploy/ title=Deploy class=dd-item><a href=/restfulapis/deploy/>Deploy</a></li><li data-nav-id=/restfulapis/updateconfig/ title="Update Config" class=dd-item><a href=/restfulapis/updateconfig/>Update Config</a></li><li data-nav-id=/restfulapis/recap/ title=Recap class=dd-item><a href=/restfulapis/recap/>Recap</a></li></ul></li><li data-nav-id=/cleanup/ title=Cleanup class=dd-item><a href=/cleanup/><b>9. </b>Cleanup</a><ul><li data-nav-id=/cleanup/overview/ title=Overview class=dd-item><a href=/cleanup/overview/>Overview</a></li><li data-nav-id=/cleanup/module4/ title="Module 4" class=dd-item><a href=/cleanup/module4/>Module 4</a></li><li data-nav-id=/cleanup/module3/ title="Module 3" class=dd-item><a href=/cleanup/module3/>Module 3</a></li><li data-nav-id=/cleanup/module2/ title="Module 2" class=dd-item><a href=/cleanup/module2/>Module 2</a></li><li data-nav-id=/cleanup/module1/ title="Module 1" class=dd-item><a href=/cleanup/module1/>Module 1</a></li><li data-nav-id=/cleanup/cloudwatchlogs/ title="CloudWatch Logs" class=dd-item><a href=/cleanup/cloudwatchlogs/>CloudWatch Logs</a></li><li data-nav-id=/cleanup/cloud9/ title=Cloud9 class=dd-item><a href=/cleanup/cloud9/>Cloud9</a></li></ul></li></ul><section id=footer><left><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | © 2020, Amazon Web Services, Inc. or its affiliates. All rights reserved.</left></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span>
<span id=toc-menu><i class="fa fa-list-alt"></i></span>
<span class=links><a href=https://webapp.serverlessworkshops.io/>Wild Rydes</a> > <a href=https://webapp.serverlessworkshops.io/usermanagement/>User Management</a> > User Pool</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#2-create-an-amazon-cognito-user-pool-using-aws-amplify-cli>2. Create an Amazon Cognito User Pool using AWS Amplify CLI</a></li></ul></li></ul></nav></div></div></div></div><div id=body-inner><h1>User Pool</h1><h3 id=2-create-an-amazon-cognito-user-pool-using-aws-amplify-cli>2. Create an Amazon Cognito User Pool using AWS Amplify CLI</h3><h4 id=background>Background</h4><p>The AWS Amplify Authentication module provides Authentication APIs and building blocks for developers who want to create user authentication experiences.</p><p><a href=https://aws.amazon.com/cognito/>Amazon Cognito</a> User Pools is a full-featured user directory service to handle user registration, authentication, and account recovery. Amazon Cognito Federated Identities on the other hand, is a way to authorize your users to use AWS services.</p><p>Amplify interfaces with User Pools to store your user information. This includes federation with other OpenID providers like Facebook & Google. Amplify also uses Federated Identities to manage user access to AWS Resources, like allowing a user to upload a file to an S3 bucket. The Amplify CLI automates the access control policies for these AWS resources and provides fine grained access controls via GraphQL for protecting data in your APIs.</p><p>In this section you use the Amplify CLI to create a new Cognito User Pool with the default settings. Then you use the Amazon Cognito Console to manage the new User Pool.</p><h4 id=amazon-cognito>Amazon Cognito</h4><p><strong>✅ Step-by-step directions</strong></p><ol><li>Execute the following commands to add the Amazon Cognito User Pool:</li></ol><pre><code>amplify add auth
</code></pre><p>The AWS Amplify CLI will now run through the set up for Amazon Cognito, select the following:</p><pre><code class=language-none data-lang=none>&gt; Do you want to use the default authentication and security configuration? &quot;Default configuration&quot;
&gt; How do you want users to be able to sign in? &quot;Username&quot;
&gt; Do you want to configure advanced settings? &quot;No, I am done.&quot;
</code></pre><p>Once configuration completes you see the following confirmation:
<img src=/images/amplify-auth-add.png alt="Amplify auth add screenshot"></p><div class="notices warning"><p>Do not run <code>amplify push</code> or <code>amplify publish</code> - this will create duplicate backend resources. Amplify Console creates the necessary resources when you push your code to your repository.</p></div><p><strong>⚠️ A new Cognito User Pool will be created for you. You need to learn the name of newly created user pool, to distinguish it from other user pools. To learn the name, do the following:</strong></p><ol><li><p>In Cloud9 repository, locate <code>wild-rydes/amplify/backend/auth</code> folder that was created by <code>amplify add auth</code> command.</p></li><li><p>Locate subfolder prefixed with <code>wildrydes</code> and parameters.json file inside.</p></li><li><p>In parameters.json file locate <strong>userPoolName</strong> property. Cognito User Pool name will consist of the value of <strong>userPoolName</strong> property suffixed with environment name. For example in picture below, <strong>userPoolName</strong> is <strong>wildrydes6f227ebc_userpool_6f227ebc</strong>, hence the Cognito User Pool name will be <strong>wildrydes6f227ebc_userpool_6f227ebc-prod</strong></p><p><img src=/images/cognito-user-pool-name.png alt="Folder indicating Cognito User Pool name">
<img src=/images/cognito-user-pool-name2.png alt="Cognito User Pool name"></p></li></ol><p>Committing your code updates to provision your Amplify backend resources in the cloud and kick off a new build.</p><ol><li>Commit the changes to your git repository:</li></ol><pre><code>git add .

git commit -m &quot;Configure Cognito&quot;

git push

</code></pre><p>Amplify Console picks up the changes and begins building and deploying your web application.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/usermanagement/amplifycli/ title="Amplify Cli"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/usermanagement/appclient/ title="App Client" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script><script src=/js/perfect-scrollbar.min.js></script><script src=/js/perfect-scrollbar.jquery.min.js></script><script src=/js/jquery.sticky.js></script><script src=/js/featherlight.min.js></script><script src=/js/html5shiv-printshiv.min.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script><script src=/js/learn.js></script><script src=/js/hugo-learn.js></script><link href=/mermaid/mermaid.css rel=stylesheet><script src=/mermaid/mermaid.js></script><script>mermaid.initialize({startOnLoad:!0})</script><section style=text-align:center><p class=site-footer__copy><a href=https://aws.amazon.com/privacy/>Privacy</a> |
<a href=https://aws.amazon.com/terms/>Site Terms</a> |
<a href=# onclick=showCookie()>Cookie Preferences</a> |
&copy; Copyright 2020 Amazon.com, Inc. or its affiliates. All rights reserved.</p></section></body></html>