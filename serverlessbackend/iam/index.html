<!doctype html><html class=no-js lang=en-us prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta property="og:title" content="Wild Rydes Web Application"><meta property="og:type" content="website"><meta property="og:url" content><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=generator content="Hugo 0.83.1"><meta name=description content="Wild Rydes Web Application"><meta name=author content="Ben Smith"><link rel="shortcut icon" href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><link rel=icon href=https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico type=image/ico><title>IAM :: Wild Rydes Web Application</title><link href=/aws-serverless-webapp-workshop/css/nucleus.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/fontawesome-all.min.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/hybrid.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/featherlight.min.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/perfect-scrollbar.min.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/auto-complete.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/theme.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/hugo-theme.css rel=stylesheet><link href=/aws-serverless-webapp-workshop/css/theme-aws.css rel=stylesheet><script src=/aws-serverless-webapp-workshop/js/jquery-3.3.1.min.js></script><script src=/aws-serverless-webapp-workshop/js/shortbreadV1.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><script>const shortbread=AWSCShortbread({domain:"webapp.serverlessworkshops.io"});shortbread.checkForCookieConsent();function showCookie(){shortbread.customizeCookies()}</script></head><body data-url=/aws-serverless-webapp-workshop/serverlessbackend/iam/><nav id=sidebar><div id=header-wrapper><div id=header><div><a href=/ title="Go home"><img style=vertical-align:middle src=/images/logo.png height=70px></a></div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/aws-serverless-webapp-workshop/js/lunr.min.js></script><script type=text/javascript src=/aws-serverless-webapp-workshop/js/auto-complete.js></script><script type=text/javascript>var baseurl="https://marcinbelczewski.github.io/aws-serverless-webapp-workshop/"</script><script type=text/javascript src=/aws-serverless-webapp-workshop/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/aws-serverless-webapp-workshop/setup/ title=Setup class=dd-item><a href=/aws-serverless-webapp-workshop/setup/><b>0. </b>Setup</a><ul><li data-nav-id=/aws-serverless-webapp-workshop/setup/accountsetup/ title="Account Setup" class=dd-item><a href=/aws-serverless-webapp-workshop/setup/accountsetup/>Account Setup</a></li><li data-nav-id=/aws-serverless-webapp-workshop/setup/recap/ title=Recap class=dd-item><a href=/aws-serverless-webapp-workshop/setup/recap/>Recap</a></li></ul></li><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/ title="Static Web Hosting" class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/><b>1. </b>Static Web Hosting</a><ul><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/overview/ title=Overview class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/overview/>Overview</a></li><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/region/ title=Region class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/region/>Region</a></li><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/repository/ title=Repository class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/repository/>Repository</a></li><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/deploy/ title=Deploy class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/deploy/>Deploy</a></li><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/modify/ title=Modify class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/modify/>Modify</a></li><li data-nav-id=/aws-serverless-webapp-workshop/staticwebhosting/recap/ title=Recap class=dd-item><a href=/aws-serverless-webapp-workshop/staticwebhosting/recap/>Recap</a></li></ul></li><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/ title="User Management" class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/><b>2. </b>User Management</a><ul><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/overview/ title=Overview class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/overview/>Overview</a></li><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/amplifycli/ title="Amplify Cli" class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/amplifycli/>Amplify Cli</a></li><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/userpool/ title="User Pool" class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/userpool/>User Pool</a></li><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/appclient/ title="App Client" class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/appclient/>App Client</a></li><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/createuser/ title="Create a User" class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/createuser/>Create a User</a></li><li data-nav-id=/aws-serverless-webapp-workshop/usermanagement/recap/ title=Recap class=dd-item><a href=/aws-serverless-webapp-workshop/usermanagement/recap/>Recap</a></li></ul></li><li data-nav-id=/aws-serverless-webapp-workshop/serverlessbackend/ title="Serverless Backend" class="dd-item
parent"><a href=/aws-serverless-webapp-workshop/serverlessbackend/><b>3. </b>Serverless Backend</a><ul><li data-nav-id=/aws-serverless-webapp-workshop/serverlessbackend/overview/ title=Overview class=dd-item><a href=/aws-serverless-webapp-workshop/serverlessbackend/overview/>Overview</a></li><li data-nav-id=/aws-serverless-webapp-workshop/serverlessbackend/dynamodb/ title=DynamoDB class=dd-item><a href=/aws-serverless-webapp-workshop/serverlessbackend/dynamodb/>DynamoDB</a></li><li data-nav-id=/aws-serverless-webapp-workshop/serverlessbackend/iam/ title=IAM class="dd-item active"><a href=/aws-serverless-webapp-workshop/serverlessbackend/iam/>IAM</a></li><li data-nav-id=/aws-serverless-webapp-workshop/serverlessbackend/lambda/ title=Lambda class=dd-item><a href=/aws-serverless-webapp-workshop/serverlessbackend/lambda/>Lambda</a></li><li data-nav-id=/aws-serverless-webapp-workshop/serverlessbackend/recap/ title=Recap class=dd-item><a href=/aws-serverless-webapp-workshop/serverlessbackend/recap/>Recap</a></li></ul></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/ title="RESTful APIs" class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/><b>4. </b>RESTful APIs</a><ul><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/overview/ title=Overview class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/overview/>Overview</a></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/restapi/ title="REST API" class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/restapi/>REST API</a></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/cognito/ title=Cognito class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/cognito/>Cognito</a></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/resource/ title="API Resource" class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/resource/>API Resource</a></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/deploy/ title=Deploy class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/deploy/>Deploy</a></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/updateconfig/ title="Update Config" class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/updateconfig/>Update Config</a></li><li data-nav-id=/aws-serverless-webapp-workshop/restfulapis/recap/ title=Recap class=dd-item><a href=/aws-serverless-webapp-workshop/restfulapis/recap/>Recap</a></li></ul></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/ title=Cleanup class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/><b>9. </b>Cleanup</a><ul><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/overview/ title=Overview class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/overview/>Overview</a></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/module4/ title="Module 4" class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/module4/>Module 4</a></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/module3/ title="Module 3" class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/module3/>Module 3</a></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/module2/ title="Module 2" class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/module2/>Module 2</a></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/module1/ title="Module 1" class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/module1/>Module 1</a></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/cloudwatchlogs/ title="CloudWatch Logs" class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/cloudwatchlogs/>CloudWatch Logs</a></li><li data-nav-id=/aws-serverless-webapp-workshop/cleanup/cloud9/ title=Cloud9 class=dd-item><a href=/aws-serverless-webapp-workshop/cleanup/cloud9/>Cloud9</a></li></ul></li></ul><section id=footer><left><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | © 2020, Amazon Web Services, Inc. or its affiliates. All rights reserved.</left></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span>
<span id=toc-menu><i class="fa fa-list-alt"></i></span>
<span class=links><a href=https://marcinbelczewski.github.io/aws-serverless-webapp-workshop/>Wild Rydes</a> > <a href=https://marcinbelczewski.github.io/aws-serverless-webapp-workshop/serverlessbackend/>Serverless Backend</a> > IAM</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#2-create-an-iam-role-for-your-lambda-function>2. Create an IAM Role for Your Lambda Function</a></li></ul></li></ul></nav></div></div></div></div><div id=body-inner><h1>IAM</h1><h3 id=2-create-an-iam-role-for-your-lambda-function>2. Create an IAM Role for Your Lambda Function</h3><h4 id=background>Background</h4><p>Every Lambda function has an <a href=https://aws.amazon.com/iam/>IAM</a> role associated with it. This role defines what other AWS services the function is allowed to interact with. In this workshop, you create an IAM role that grants your Lambda function permission to write logs to <a href=https://aws.amazon.com/cloudwatch/>Amazon CloudWatch Logs</a> and access to write items to your DynamoDB table.</p><h4 id=high-level-instructions>High-Level Instructions</h4><p>Use the IAM console to create a new role. Name it <code>%INITIALS%-WildRydesLambda</code> and select AWS Lambda for the role type. You&rsquo;ll need to attach policies that grant your function permissions to write to Amazon CloudWatch Logs and put items to your DynamoDB table.</p><p>Attach the managed policy called <code>AWSLambdaBasicExecutionRole</code> to this role to grant the necessary CloudWatch Logs permissions. Also, create a custom inline policy for your role that allows the <code>dynamodb:PutItem</code> action for the table you created in the previous section.</p><p><strong>✅ Step-by-step directions</strong></p><ol><li>Go to the <a href=https://console.aws.amazon.com/iam/home>AWS IAM Console</a></li><li>Select <strong>Roles</strong> in the left navigation bar and then choose <strong>Create role</strong>.</li><li>Select <strong>Lambda</strong> for the role type from the <strong>AWS service</strong> group, then click <strong>Next: Permissions</strong><div class="notices note"><p>Selecting a role type automatically creates a trust policy for your role that allows AWS services to assume this role on your behalf. If you were creating this role using the CLI, AWS CloudFormation or another mechanism, you would specify a trust policy directly.</p></div></li><li>Begin typing <code>AWSLambdaBasicExecutionRole</code> in the <strong>Filter</strong> text box and check the box next to that role.</li><li>Click <strong>Next: Tags</strong>. Add any tags that you wish.</li><li>Click <strong>Next: Review</strong>.</li><li>Enter <code>%INITIALS%-WildRydesLambda</code> for the <strong>Role name</strong>. <strong>⚠️</strong> Remember about your initials prefix!</li><li>Choose <strong>Create role</strong>.</li></ol><p>Next you need to add permissions to the role so that it can access your DynamoDB table.</p><p>*<em>✅ Step-by-step directions</em></p><ol><li>While in the IAM Console on the roles page type <code>%INITIALS%-WildRydesLambda</code> into the filter box on the Roles page and choose the role you just created.</li><li>On the Permissions tab, choose the <strong>Add inline policy</strong> link in the upper right corner to create a new inline policy.
<img src=/aws-serverless-webapp-workshop/images/inline-policies.png alt="Inline policies screenshot"></li><li>Select <strong>Choose a service</strong>.</li><li>Begin typing <code>DynamoDB</code> into the search box labeled <strong>Find a service</strong> and select <strong>DynamoDB</strong> when it appears.
<img src=/aws-serverless-webapp-workshop/images/select-policy-service.png alt="Select policy service"></li><li>Choose <strong>Select actions</strong>.</li><li>Begin typing <code>PutItem</code> into the search box labeled <strong>Filter actions</strong> and check the box next to <strong>PutItem</strong> when it appears.</li><li>Select the <strong>Resources</strong> section.</li><li>With the <strong>Specific</strong> option selected, choose the Add ARN link in the <strong>table</strong> section.</li><li>Paste the ARN of the table you created in the previous section in the <strong>Specify ARN for table</strong> field, and choose <strong>Add</strong>.</li><li>Choose <strong>Review Policy</strong>.</li><li>Enter <code>DynamoDBWriteAccess</code> for the policy name and choose <strong>Create policy</strong>.
<img src=/aws-serverless-webapp-workshop/images/review-policy.png alt="Review Policy"></li></ol><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/aws-serverless-webapp-workshop/serverlessbackend/dynamodb/ title=DynamoDB><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/aws-serverless-webapp-workshop/serverlessbackend/lambda/ title=Lambda style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/aws-serverless-webapp-workshop/js/clipboard.min.js></script><script src=/aws-serverless-webapp-workshop/js/perfect-scrollbar.min.js></script><script src=/aws-serverless-webapp-workshop/js/perfect-scrollbar.jquery.min.js></script><script src=/aws-serverless-webapp-workshop/js/jquery.sticky.js></script><script src=/aws-serverless-webapp-workshop/js/featherlight.min.js></script><script src=/aws-serverless-webapp-workshop/js/html5shiv-printshiv.min.js></script><script src=/aws-serverless-webapp-workshop/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=/aws-serverless-webapp-workshop/js/modernizr.custom-3.6.0.js></script><script src=/aws-serverless-webapp-workshop/js/learn.js></script><script src=/aws-serverless-webapp-workshop/js/hugo-learn.js></script><link href=/aws-serverless-webapp-workshop/mermaid/mermaid.css rel=stylesheet><script src=/aws-serverless-webapp-workshop/mermaid/mermaid.js></script><script>mermaid.initialize({startOnLoad:!0})</script><section style=text-align:center><p class=site-footer__copy><a href=https://aws.amazon.com/privacy/>Privacy</a> |
<a href=https://aws.amazon.com/terms/>Site Terms</a> |
<a href=# onclick=showCookie()>Cookie Preferences</a> |
&copy; Copyright 2020 Amazon.com, Inc. or its affiliates. All rights reserved.</p></section></body></html>